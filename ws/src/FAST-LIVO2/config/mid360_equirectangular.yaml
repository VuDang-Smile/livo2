/**:
  ros__parameters:
    common:
      img_topic: "/image_raw"  # Topic for equirectangular image
      lid_topic: "/livox/lidar"         # CustomMsg from Livox driver
      imu_topic: "/livox/imu"           # IMU from Livox driver
      img_en: 1
      lidar_en: 1
      ros_driver_bug_fix: true

    extrin_calib:
      extrinsic_T: [0.04165, 0.02326, -0.0284]  # IMU to LiDAR (keep default)
      extrinsic_R: [1.0, 0.0, 0.0,              # IMU to LiDAR (keep default)
                    0.0, 1.0, 0.0,
                    0.0, 0.0, 1.0]
      # Calibration from direct_visual_lidar_calibration
      # Rcl: rotation matrix from lidar to camera (row-major)
      Rcl: [-0.04835443, -0.98813994, -0.14574395,
            -0.00736797, 0.14626354, -0.98921822,
            0.99880306, -0.04675925, -0.01435308]
      # Pcl: translation vector from lidar to camera
      Pcl: [0.02371284, 0.12586664, 0.08098288]

    time_offset: 
      # Adjusted for better IMU-LiDAR synchronization
      # If IMU is ahead of LiDAR, use negative value
      # If IMU is behind LiDAR, use positive value
      imu_time_offset: 0.0
      img_time_offset: 0.0
      exposure_time_init: 0.0

    preprocess:
      point_filter_num: 1  # Keep all points for better accuracy
      filter_size_surf: 0.12  # Balanced filter size
      lidar_type: 8 # Livox MID360 LiDAR
      scan_line: 6  # MID360 has 6 scan lines
      blind: 0.8

    vio:
      max_iterations: 3  # Reduced for better performance
      outlier_threshold: 1000
      img_point_cov: 100
      patch_size: 7  # Balanced patch size
      patch_pyrimid_level: 3  # Reduced from 4 to 3 for better performance
      normal_en: true
      raycast_en: false
      inverse_composition_en: false
      exposure_estimate_en: true
      inv_expo_cov: 0.1

    imu:
      imu_en: true
      imu_int_frame: 30
      # Increased covariance to reduce noise sensitivity
      # Higher values make the filter more robust to IMU noise
      acc_cov: 0.8  # Increased from 0.5 to reduce noise impact
      gyr_cov: 0.5  # Increased from 0.3 to reduce noise impact
      # Increased bias covariance for better bias estimation stability
      b_acc_cov: 0.0002  # Increased from 0.0001 for better stability
      b_gyr_cov: 0.0002  # Increased from 0.0001 for better stability

    lio:
      max_iterations: 3  # Reduced for better performance
      dept_err: 0.02
      beam_err: 0.05
      min_eigen_value: 0.0025
      voxel_size: 0.55  # Increased from 0.45 to reduce point density
      max_layer: 2
      max_points_num: 45  # Reduced from 55 to reduce memory usage
      layer_init_num: [5, 5, 5, 5, 5]

    local_map:  
      map_sliding_en: false
      half_map_size: 90  # Balanced map size
      sliding_thresh: 8.0

    memory:
      # Buffer size limits to prevent memory leaks (optimized for performance)
      max_lidar_buffer_size: 5    # Maximum LiDAR frames in buffer
      max_imu_buffer_size: 100    # Maximum IMU messages in buffer (increased for sync stability)
      max_img_buffer_size: 2      # Maximum image frames in buffer
      forced_sliding_interval: 5  # Force map sliding every N frames (reduced from 10 for more frequent cleanup)
      vio_feat_map_cleanup_interval: 20  # Cleanup VIO feat_map every N frames (reduced from 30)
      vio_feat_map_cleanup_radius: 15.0  # Cleanup radius for VIO feat_map (meters)

    uav:
      imu_rate_odom: false
      gravity_align_en: false

    publish:
      dense_map_en: false  # Disabled to reduce memory usage and prevent system freeze
      pub_effect_point_en: false 
      pub_plane_en: false
      pub_scan_num: 3  # Increased from 2 to reduce publish rate
      blind_rgb_points: 0.0

    evo:
      seq_name: "MID360_Equirectangular"
      pose_output_en: false

    pcd_save:
      pcd_save_en: true
      colmap_output_en: false
      filter_size_pcd: 0.05  # Smaller filter size for higher point density (0.05m = 5cm, was 0.12m)
      interval: 1            # Save PCD every N scans (1 = every scan, -1 = disabled)
      incremental_map_en: false  # DISABLED: Caused segfaults, load from disk instead
      save_raw_map: true     # Save raw (non-downsampled) map for maximum detail

    camera:
      model: Equirectangular
      # Calibrated camera model from calibration data
      # Resolution: 2880x1440 (equirectangular)
      width: 2880
      height: 1440
      scale: 1.0  # Full resolution
